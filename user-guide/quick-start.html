<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">


    <title>Mandolin</title>


    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Mandolin" />
    <meta name="keywords" content="machine learning, distributed" />


    <link href="../css/style.css" rel="stylesheet" type="text/css">
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <!-- 
    <link href="../css/bootstrap.css" rel="stylesheet">
    <link href="../css/docs.css" rel="stylesheet">
    -->

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->


  </head>
  
  <div id="container">
  <div id="header"> 
    <h1 id="logo-text">Mandolin</h1>
  </div>
  <div id="site-content">
  <div id="col-left">    
  <p id="top">
     
     <h2 id="mnist-example" class="section">MNIST Example</h2>
     <p>While Mandolin is intended to be used with Apache Spark, all algorithms can be run within
     a single JVM process using a separate non-Spark backend. To run a simple example using a linear (logistic
     regression) model, enter the directory <code>examples/mnist</code>. Assuming the Mandolin jar file
     has been built (see above), the following invocation should train a model and evaluate its
     progress during training every trainin epoch:</p>
     <pre><code>java -cp ../../target/scala-2.11/mandolin-assembly-0.2.7-SNAPSHOT_2.11.7.jar \
     org.mitre.mandolin.app.Driver --conf mnist.conf</code></pre>
     <p>The evaluation is written in this example to the file <code>mnist.train.progress</code> as specified in the
     <code>mnist.conf</code> configuration file. Note that all configuration file values can be overridden on the
     command line.  So to write the training progress to a different file name, one could use the 
     invocation:</p>
     <pre><code>java -cp ../../target/scala-2.11/mandolin-assembly-0.2.7-SNAPSHOT_2.11.7.jar \
    org.mitre.mandolin.app.Driver --conf mnist.conf \
    mandolin.app.trainer.progress-file=$PWD/another.output.file</code></pre>
     <p>Mandolin supports a variety of model topologies and loss functions which can be specified easily
     using the configuration system. More details follow in the configuration section, but for now,
     let&#39;s train a DNN model using a single hidden layer of 1000 Rectified Linear Units with 50% dropout.
     This model is specified in the configuration file <code>examples/mnist/mnist.1hl.conf</code> and can be
     invoked as:</p>
     <pre><code>java -cp ../../target/scala-2.11/mandolin-assembly-0.2.7-SNAPSHOT_2.11.7.jar \
     org.mitre.mandolin.app.Driver --conf mnist.conf \
     --conf mnist.1h.conf </code></pre>
     <p>Note that the training of this model will take some time to finish. The configuration file specifies
     that 8 CPU threads should be used. If you have a more powerful machine, you can speed up the training
     time by adding the option <code>mandolin.threads=N</code> to the command-line
     invocation where <code>N</code> refers to the number of threads to utilize.</p>
     <p>Examination of the output file <code>mnist.train.1hl.progress</code> makes 
     apparent the advantage of using a more complex, non-linear model on this dataset. The test accuracies are 
     much improved over the linear model.</p>
     
     <h2 id="mnist-example-using-spark" class="section">MNIST Example Using Spark</h2>
     <p>Training can be very CPU-intensive with neural networks. Mandolin supports distributed
     parameter estimation via Apache Spark which can provide faster training for certain
     datasets, and model topologies. On each iteration separate models are trained on different compute nodes
     over different (possibly overlapping) subsets of the training data. After each epoch (or after
     every N epochs) the model parameters (weights) are averaged.<br></p>
     <p>To run Mandolin on a Spark cluster, ensure that the setting 
     <code>mandolin.without-spark</code> is set to <code>false</code> by either modifying the configuration file or
     providing the argument <code>mandolin.without-spark=false</code> on the command line.  Then execute</p>
     <pre><code>$SPARK_HOME/bin/spark-submit --class org.mitre.mandolin.app.Driver \
  --master spark://master.url:7077 \
      ../../target/scala-2.11/mandolin-assembly-0.2.7-SNAPSHOT_2.11.7.jar \
  --conf mnist.1h.conf mandolin.without-spark=false</code></pre>      
  </p>
  </div>

  <div id="col-right">
    <!-- <div style="padding: 30px 10px 10px;">  -->
      <ul>
       <div class="toc">
         <ul>
           <li>
             <p class="toc level1">Overview</p>
             <ul>
               <li><a class="toc level2" href="../overview/intro.html">Introduction</a></li>
             </ul>
           </li>
           <li>
             <p class="toc level1">Users Guide</p>
             <ul>
               <li><a class="toc level2" href="installation.html">Installation</a></li>
               <li><span class="toc level2 active">Quickstart</span></li>
               <li><a class="toc level2" href="formats.html">Formats</a></li>
               <li><a class="toc level2" href="configuration.html">Configuration</a></li>
               <li><a class="toc level2" href="mandolin-glp.html">Generalized Layered Perceptron</a></li>
               <li><a class="toc level2" href="specification.html">Model Specification</a></li>
             </ul>
           </li>
           <li>
             <p class="toc level1">Quick-start Without Spark</p>
             <ul>
               <li><a class="toc level2" href="../without-spark-quickstart/linear-classifier.html">Linear Classifier</a></li>
             </ul>
           </li>
           <li>
             <p class="toc level1">Developer Docs</p>
             <ul>
               <li><a class="toc level2" href="../api-docs/api.html">API Docs</a></li>
             </ul>
           </li>
           <li>
             <p class="toc level1">Runtime Decoder</p>
             <ul>
               <li><a class="toc level2" href="../runtime-decoder/runtime-decoder.html">Runtime Decoder</a></li>
             </ul>
           </li>
         </ul>
       </div>
      </ul>
    </div>
  </div>



  </div>


</body></html>
