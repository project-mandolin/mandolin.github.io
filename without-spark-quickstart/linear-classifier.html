<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">


    <title>Mandolin</title>


    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Mandolin" />
    <meta name="keywords" content="machine learning, distributed" />


    <link href="../css/style.css" rel="stylesheet" type="text/css">
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <!-- 
    <link href="../css/bootstrap.css" rel="stylesheet">
    <link href="../css/docs.css" rel="stylesheet">
    -->

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->


  </head>
  
  <div id="container">
  <div id="header"> 
    <h1 id="logo-text">Mandolin</h1>
  </div>
  <div id="site-content">
  <div id="col-left">    
  <p id="top">
     
     <h1 id="linear-classifier" class="title">Linear Classifier</h1>
     <p>Mandolin implements linear classifiers as a special case of a Generalized Layered Perceptron. 
     See the <a href="../user-guide/mandolin-glp.html">documentation</a> describing the general form of such models. This section
     provides some very specific documentation and examples focused on training and applying 
     simple linear classifiers. Additionally, the documentation here focuses on training such
     models <strong>without spark</strong> as this is sufficient for many modest or even large datasets, given that
     linear models are relatively easy to train.</p>
     
     <h2 id="mandolin-configuration" class="section">Mandolin Configuration</h2>
     <p>As explained elsewhere, Mandolin uses the Typesafe configuration system (used by Akka and Spark among
     other programs), see <a href="../user-guide/configuration.html">configuration</a>. This allows for experimental settings to 
     be recorded in a single file for later use
     and greatly aids replicability.  However, for quick experimentation it helps to be able
     to use simple command-line invocations for all program parameters.</p>
     
     <h2 id="training-a-model" class="section">Training a Model</h2>
     <p>To train a model with a file <code>training.file</code> that follows the Mandolin input format, a variety or parameters
     must be specified to indicate how the training process should proceed. Additionally, the inventory of
     classes or <em>labels</em> must be specified within a separate file. Consider the simple example file
     in <code>examples/mllib/sample_multiclass_classification_data.txt</code>. The labels for this dataset are simply
     the integers <code>1,2</code> and <code>3</code> as specified in the file <code>examples/mllib/multiclass.labels</code>, each distinct
     label on a separate line.  Given these two files, Mandolin can be used to train a model with:</p>
     <pre><code>java -cp mandolin-assembly-...jar org.mitre.mandolin.app.Driver \
  mandolin.trainer.train-file=examples/mllib/sample_multiclass_classification_data.txt \
  mandolin.trainer.label-file=examples/mllib/multiclass.labels \
  mandolin.without-spark=true \
  mandolin.trainer.model-file=model.file.1 \
  mandolin.mode=train</code></pre>
     
     <h2 id="decoding-with-a-trained-model" class="section">Decoding with a Trained Model</h2>
     <p>A trained model can be used on new data in the same input format as the training data as below. Note
     that the input file is specified via the <code>mandolin.trainer.test-file</code> option.</p>
     <pre><code>java -cp mandolin-assembly-...jar org.mitre.mandolin.app.Driver \
  mandolin.trainer.test-file=examples/mllib/sample_multiclass_classification_data.txt \
  mandolin.without-spark=true \
  mandolin.trainer.model-file=model.file.1 \
  mandolin.mode=decode \
  mandolin.decoder.output-file=output.predictions</code></pre>
     <p>The output file holding the predictions will have columns: <code>ID</code>,<code>&lt;label_1&gt;</code>,<code>&lt;label_2&gt;</code>,...,<code>Label</code>
     where each <code>&lt;label_i&gt;</code> is one of the labels in the provided label file (not necessarily in the same
     order).  The final column <code>Label</code> is actually the ground truth label in the dataset, if provided.
     Each row specifies the posterior distribution over the labels generated by the classifier.</p>
     
     <h2 id="evaluation" class="section">Evaluation</h2>
     <p>Model development often proceeds by training a classifier and evaluating it on a held out dataset.
     The simplest way to do this in Mandolin is to run in &quot;train-test&quot; mode.  Example invocation:</p>
     <pre><code>java -cp mandolin-assembly-...jar org.mitre.mandolin.app.Driver \
  mandolin.trainer.train-file=examples/mllib/sample_multiclass_classification_data.txt \
  mandolin.trainer.label-file=examples/mllib/multiclass.labels \
  mandolin.trainer.test-file=examples/mllib/sample_multiclass_classification-data.txt \
  mandolin.without-spark=true \
  mandolin.mode=train-test \
  mandolin.trainer.progress-file=training.progress</code></pre>
     <p>This will train a model on the data provided with the <code>mandolin.trainer.train-file</code> option
     and apply the trained model to the test file provided with <code>mandolin.trainer.test-file</code>. The model
     will be evaluated against the test dataset after each trainign epoch.  To evaluate the model less
     frequently, e.g. after every 5 epochs, add the option <code>mandolin.trainer.eval-freq</code>, e.g.:</p>
     <pre><code>java -cp mandolin-assembly-...jar org.mitre.mandolin.app.Driver \
  mandolin.trainer.train-file=examples/mllib/sample_multiclass_classification_data.txt \
  mandolin.trainer.label-file=examples/mllib/multiclass.labels \
  mandolin.trainer.test-file=examples/mllib/sample_multiclass_classification-data.txt \
  mandolin.without-spark=true \
  mandolin.mode=train-test \
  mandolin.trainer.progress-file=training.progress \
  mandolin.trainer.eval-freq=5</code></pre>
     <p>The output in the <code>mandolin.trainer.progress-file</code> value shows the cumulative total training time, the 
     training loss, the accuracy on the test data, the area under the ROC (for binary and for multiclass datasets).
     In addition, accuracies are computed for subsets (50% and 30%) of the test data based on the entropy of the posterior
     distribution provided by the model. Lower entropy posteriors indicate a higher degree of certainty by the model.</p>
     
     <h2 id="advanced-options" class="section">Advanced Options</h2>
     <p>More advanced options for training models are explained in the User&#39;s Guide, including different
     online learning algorithms/updaters or using a non-linear model in the form a multilayer perceptron.</p>      
  </p>
  </div>

  <div id="col-right">
    <!-- <div style="padding: 30px 10px 10px;">  -->
      <ul>
       <div class="toc">
         <ul>
           <li>
             <p class="toc level1">Overview</p>
             <ul>
               <li><a class="toc level2" href="../overview/intro.html">Introduction</a></li>
             </ul>
           </li>
           <li>
             <p class="toc level1">Users Guide</p>
             <ul>
               <li><a class="toc level2" href="../user-guide/installation.html">Installation</a></li>
               <li><a class="toc level2" href="../user-guide/quick-start.html">Quickstart</a></li>
               <li><a class="toc level2" href="../user-guide/formats.html">Formats</a></li>
               <li><a class="toc level2" href="../user-guide/configuration.html">Configuration</a></li>
               <li><a class="toc level2" href="../user-guide/mandolin-glp.html">Generalized Layered Perceptron</a></li>
               <li><a class="toc level2" href="../user-guide/specification.html">Model Specification</a></li>
             </ul>
           </li>
           <li>
             <p class="toc level1">Quick-start Without Spark</p>
             <ul>
               <li><span class="toc level2 active">Linear Classifier</span></li>
             </ul>
           </li>
           <li>
             <p class="toc level1">Developer Docs</p>
             <ul>
               <li><a class="toc level2" href="../api-docs/api.html">API Docs</a></li>
             </ul>
           </li>
           <li>
             <p class="toc level1">Runtime Decoder</p>
             <ul>
               <li><a class="toc level2" href="../runtime-decoder/runtime-decoder.html">Runtime Decoder</a></li>
             </ul>
           </li>
         </ul>
       </div>
      </ul>
    </div>
  </div>



  </div>


</body></html>
